/*
   Incluya en este fichero todas las implementaciones que pueden
   necesitar compartir todos los m√≥dulos (editor, subscriptor y
   proceso intermediario), si es que las hubiera.
*/

#include "comun.h"
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/stat.h>
#include <netinet/in.h>
#include <netdb.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <error.h>




int recibirMensaje(int socket, struct mensaje *msg){

  int n;
  /*Despejamos el mensaje para volver*/
  bzero((char *)&msg, sizeof(msg));  
  if((n = read(socket, msg, sizeof(msg_t))) < 0){
    perror("error al leer del socket\n");
    close(socket);
    return -1 ; 
  }
  return 0;
}

int enviarMensaje(int socket, struct mensaje msg){

  int n;
  if((n = send(socket, &msg, sizeof(msg),0)) < 0){
    perror("error al escribir por el socket\n");
    close(socket);
    return -1;
  }      
  return 0;
}

